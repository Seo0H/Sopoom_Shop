<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sopoom.mappers.ShopC">

	<!-- 카트 목록 불러오기 -->
	<select id="selectCart" parameterType="String" 	resultType="com.sopoom.dto.CartVO">
		select userid, p_id, QUANTITY from cart where userid=#{userid}
	</select>
	
	<!-- product table 에서 Cart table에 담긴 상품 종류 정보 가져오기 -->
	<select id="selectCartProductInfo" parameterType="List" resultType="com.sopoom.dto.ProductVO">
		select * from product WHERE p_id in
			<foreach collection="p_idList" item="p_id"  open="(" close=")" separator=",">
			#{p_id}
			</foreach>
	</select>
	
	
	<!-- 카트에 상품 추가 -->
	<insert id="addCart">
		insert into CART(userid, productid, Quantity)
		VALUES(#{userid},#{productid},#{Quantity})
	</insert>

	<!-- 카트 업데이트 -->
	<update id="updateCart" parameterType="com.sopoom.dto.CartVO">
		update cart set userid= #{userid}, quantity = #{quantity} where p_id =#{p_id}
	</update>

</mapper>

    